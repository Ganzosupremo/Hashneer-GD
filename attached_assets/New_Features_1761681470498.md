# Game Mode Changes - Mining Experience

## Core Concept

The player is in a mining world where they can extract dirt to mine different types of ores and gems. The objective is to find the Bitcoin before AI competitors do. Players earn fiat money by selling mined ores and gems in the in-game shop.

**Win Condition**: Find the Bitcoin ore before AI competitors  
**Loss Condition**: AI competitors find the Bitcoin first  
**No time limit** - pressure comes from AI competition

---

## Mining Mechanics

### Tool System
Instead of shooting, players use mining tools with different capabilities:

- **Basic Pickaxe** (starter tool)
  - 1x1 mining area
  - Moderate speed
  
- **Iron Drill** (shop upgrade)
  - 2x2 mining area
  - Faster mining speed
  
- **Diamond Drill** (shop upgrade)
  - 3x3 mining area
  - Fastest speed
  - Reveals ore types in nearby quadrants
  
- **Explosive Charges** (consumable)
  - Large area destruction
  - Destroys some ore value as trade-off

### Stamina System
- Each mining action costs stamina
- Stamina regenerates over time
- Shop upgrades can increase max stamina or regen rate
- Ties into existing health/resource systems

### Depth Progression
The mining world is structured in vertical layers:

**Depth Layers 0-5 (Surface)**
- 80% Dirt, 15% Coal, 5% Iron
- Easy to mine
- Low value ores

**Depth Layers 6-10 (Mid-depth)**
- 60% Dirt, 20% Coal, 10% Iron, 5% Copper, 5% Silver
- Moderate mining difficulty
- Medium value ores

**Depth Layers 11-15 (Deep)**
- 50% Dirt, 15% Coal, 15% Iron, 10% Gold, 5% Emerald, 5% Diamond
- Harder to mine
- High value ores

**Depth Layers 16-20 (Bitcoin Zone)**
- 40% Dirt, 20% Iron, 15% Gold, 10% Diamond, 14% Silver, 1% Bitcoin Ore
- Hardest to mine
- Bitcoin spawns here

---

## Ore & Resource System

### Ore Types (by rarity)

**Common**
- Dirt (no value, filler)
- Coal (low value)
- Iron (medium value)

**Uncommon**
- Copper
- Silver

**Rare**
- Gold
- Emerald
- Diamond

**Ultra Rare**
- Bitcoin Ore (the objective)

### Ore Properties
- **Base Value**: Fiat earned when sold
- **Spawn Weight**: Determines rarity
- **Depth Multiplier**: Value increases at deeper layers
- **Visual Effects**: Unique textures and particle colors

### Ore Vein System
When a player mines a valuable ore, nearby quadrants have a higher chance of containing the same ore type (realistic vein distribution). This encourages strategic exploration.

---

## AI Competition System

### Competing Miners
Instead of a time limit, AI competitors race against the player:

- **Competitor Names**: "Satoshi AI", "Hash Hunter", "Block Breaker"
- **Visual Presence**: Ghost miners visible in adjacent mining shafts (parallax effect)
- **Dynamic Difficulty**: AI speed scales with game level progression

### AI Behavior
- AI miners dig downward at a steady pace
- **Difficulty Scaling**: AI gets 10% faster each game level
- **Rubber-banding**: If player falls significantly behind, AI slows slightly to keep game competitive
- **Smart Pacing**: If player is dominating, AI speeds up to maintain challenge

### Pressure Feedback (No Timer!)

Instead of a countdown timer, players get **contextual warnings**:

**AI Progress Stages**:
- 0-30% complete: "Competitors are still at the surface"
- 30-60% complete: "‚ö†Ô∏è Hash Hunter is catching up!"
- 60-85% complete: "üö® URGENT: Satoshi AI at depth 15!"
- 85%+ complete: "üíÄ CRITICAL: Competitors near Bitcoin!"

**Visual Feedback**:
- Progress bar comparing player depth vs AI depth
- Mini-map showing relative positions
- Screen shake when AI makes breakthroughs
- Periodic notifications: "Satoshi AI found Gold!"

**Optional Time Estimate** (information, not a limit):
- Show "Estimated time until AI victory: ~3 minutes"
- Updates dynamically based on AI progress
- Helps players gauge urgency without hard cutoff

---

## Level Shop

### Shop Structure
Players can spend fiat earned from selling ores to buy upgrades before or during a level.

### Temporary Upgrades (Lost on Level Failure)

**Boosts**
- **Time Extension** - Slow AI competitors by 15% for 60 seconds
- **Speed Boost** - Increase movement/mining speed
- **Fortune Multiplier** - Ore values worth 25%/50%/100% more this run
- **Auto-Seller** - Automatically sells collected ores without returning to surface

**Tools**
- **Ore Scanner** - Highlights valuable ores within radius
- **Sabotage Kit** - Slow all competitors by 20% for 90 seconds
- **Explosive Charges** - Consumable large-area mining

### Permanent Tools (Carry Over on Success)

**Mining Tools**
- **Better Pickaxes** - Upgraded tools persist if level completed successfully
- **Tool Upgrades** - Increased mining area, speed improvements

**Progression Upgrades**
- **Backpack Upgrades** - Carry more ore before needing to sell
- **Efficiency Books** - Permanently reduce stamina cost
- **Stamina Boost** - Increase max stamina capacity

### Strategic Choice
```
Spend fiat on temporary boosts to guarantee this level's success?
OR
Save fiat for permanent upgrades that help all future game levels?
```

### Player Tools to Influence AI

**Sabotage Options** (shop purchases):
- **Bribe Miners** - Slow competitors for limited time
- **False Tip** - Misdirect one AI miner temporarily
- **Market Manipulation** - Cause distraction event affecting AI

---

## Level Completion Flow

### Victory (Bitcoin Found)

**Level Complete Screen Shows**:
- Bitcoin found animation
- Stats: Total ores mined, fiat earned, depth reached
- AI progress at time of victory (competitive ranking)
- Bonuses earned (see below)

**Player Options**:
- **Continue to Next Level** - Keeps all shop upgrades, proceeds immediately
- **Return to Main Menu** - Sells all remaining ores, resets shop upgrades

**Progression Rewards**:
- **Speed Bonus**: Faster completion = higher fiat multiplier
- **Combo System**: Mining same ore type consecutively gives value multiplier
- **Perfect Run**: Finding Bitcoin with AI below 50% progress = extra reward
- **Collection Bonus**: Percentage of total ores found gives bonus fiat

### Defeat (AI Finds Bitcoin First)

**Game Over Screen Shows**:
- AI competitor winning animation ("Hash Hunter found the Bitcoin first!")
- Partial earnings from ores already sold
- Stats: Depth reached, AI progress comparison

**Consequences**:
- **Lose all shop upgrades** (temporary AND carried-over tools)
- Earn partial fiat from sold ores only
- Return to level select to retry

---

## Level Structure

### Quadrant System
Levels are composed of destroyable quadrants:

**Quadrant Types**:
- **Dirt Blocks** (majority) - No ore drops, easy to destroy
- **Ore Blocks** - Contain ores based on depth layer spawn rates
- **Hard Rock** - Takes more hits, may contain rare ores
- **Vein Blocks** - Connected ore clusters

### World Generation
- Procedurally generated each game level
- Depth layer system (0-20) determines ore distribution
- Bitcoin ore spawns at depth 16-20 with 1% spawn rate
- Ore veins create realistic clusters

### Destruction Mechanics
- Reuse existing QuadrantBuilder fracture system
- Block health based on ore type (dirt < coal < iron < diamond)
- Particle effects show ore type when destroyed
- Visual cracks appear before block breaks, or use the PolygonFracture Lib to break the block

---

## Special Events & Features

### Random Events

**Cave-ins**
- Random quadrants collapse during mining
- Creates new paths and shortcuts
- Can reveal hidden ore veins
- Affects both player and AI progress

**Ore Rush**
- Temporary 30-second event
- All ore values doubled
- Audio/visual cues for activation

**Lucky Streak**
- Next 5 ores mined guaranteed rare or better
- Rare random occurrence
- High-value reward for lucky players

### Risk/Reward Mechanics

**Deep Dive Challenge**
- Optional strategy: Ignore shallow ores, rush to depth 15+
- Higher risk: Harder blocks, AI gets closer
- Higher reward: Better ore density, speed bonus if successful

**Market Events**
- Economic events affect ore prices dynamically
- Market Crash: Ore values drop 25%
- Market Boom: Ore values increase 50%
- Linked to existing EconomicEvent system

---

## Meta Progression

### Game Level Progression

**Level 1-5: Dirt Quarry**
- Tutorial zone
- Basic ores (coal, iron, copper)
- AI at 70% base speed
- Learn mechanics

**Level 6-10: Crystal Caves**
- More gems appear
- AI at 100% base speed
- Introduces ore veins

**Level 11-15: Deep Mines**
- Gold/diamond focus
- AI at 120% base speed
- Harder blocks

**Level 16+: Bitcoin Depths**
- Highest ore concentration
- AI at 140%+ base speed
- Expert challenge

### Difficulty Modes (Optional)

**Relaxed Mode**
- AI at 70% speed
- Learn mechanics without pressure

**Competitive Mode** (Default)
- AI at 100% speed
- Normal challenge

**Hardcore Mode**
- AI at 130% speed
- More aggressive warnings
- Expert players only

---

## Integration with Existing Systems

### Bitcoin Network
- Mining Bitcoin ore triggers `BitcoinNetwork.mine_block()`
- Links to `MainEventBus.level_completed` signal
- Economic events affect shop prices

### Economic System
- Ore prices affected by `EconomicEvent`
- Shop uses existing `Constants.CurrencyType` (FIAT)
- Market dynamics create strategic selling decisions

### Weapon System Adaptation
- Reuse `FireWeaponComponent` for tool swinging
- Tool fire rate = mining speed
- Bullet damage ‚Üí mining power conversion

### QuadrantBuilder Adaptation
- Modify to spawn ore-type quadrants
- Use existing fracture system for destruction
- BlockCore health varies by ore hardness

### Item Drops System
- Leverage existing `item_drops` addon
- Create `OrePickupResource` similar to `CurrencyPickupResource`
- Ores auto-collect when player is near them (like currency pickups)
- Auto-Seller upgrade interfaces with pickup system to sell without returning to surface

### Save System
- Track shop upgrades separately from skill tree
- Clear temporary upgrades on failure
- Save successful run tool persistence

---

## UI/UX Elements

### In-Game HUD

**Primary Displays**:
- **Ore Counter** - Shows count by ore type with icons
- **AI Progress Bar** - Visual comparison of depths
- **Current Depth Indicator** - Shows which layer (0-20)
- **Fiat Earned** - Running total for current run
- **Stamina Bar** - Mining action resource

**Mini-Map**:
- Shows player position
- AI miner positions (ghosted)
- Ore vein locations (if scanner equipped)
- Bitcoin zone highlight

### Audio Cues

**Mining Sounds**:
- Different sounds per ore type
- Satisfying impact feedback
- Rare ore "ding" sound

**Music Progression**:
- Calm music at surface
- Tension builds as AI progresses
- Urgent music when AI > 60% progress
- Triumphant theme when Bitcoin found

**AI Competition**:
- Audio stings when AI makes progress
- Warning sounds for urgent AI stages
- Competitor breakthrough notifications

---

## Summary of Key Improvements

‚úÖ **No arbitrary time limit** - Pressure from dynamic AI competition  
‚úÖ **Strategic depth** - Tool choices, upgrade decisions, risk/reward  
‚úÖ **Roguelite elements** - Carry-over on success, lose-all on failure  
‚úÖ **Visual competition** - See AI miners, track progress dynamically  
‚úÖ **Organic difficulty scaling** - AI speeds up with game level, rubber-bands for fairness  
‚úÖ **Player agency** - Sabotage tools, market timing, exploration strategies  
‚úÖ **Replayability** - Procedural generation, random events, multiple paths to victory  
‚úÖ **Thematic immersion** - Mining competition feels more meaningful than racing clock